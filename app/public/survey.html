<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!--	<script type="text/javascript" src="../data/friends.js"></script>	-->
</head>
<body>
<div class="container">
	<h1>Survey Questions</h1><hr>
	<h2>About You</h2>
	
	<form id="surveyResults" role="form">
	    <label>Name (Required)</label><br>
	    <input type="text" placeholder=" Name" id="name" class="form-control">
	    <br><br>
	    <label>Link to Photo Image (Required)</label><br>
	    <input type="text" placeholder=" Image Link" id="imageLink" class="form-control">
		<!--Questions-->
		<div class="form-group">
			<h2>Question 1</h2>
			<p>You rarely do something out of sheer curiosity.</p>
			<select id="question1" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 2</h2>
			<p>People can rarely upset you.</p>
			<select id="question2" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 3</h2>
			<p>It is often difficult for you to relate to other people's feelings.</p>
			<select id="question3" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 4</h2>
			<p>In a discussion, truth sould be more important than people's sensitivities.</p>
			<select id="question4" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 5</h2>
			<p>You rarely get carried away by fantasies and ideas.</p>
			<select id="question5" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>	
		<div class="form-group">
			<h2>Question 6</h2>
			<p>You think that everyone's views should be respected regardless of whether they are supported by facts or 
			not.</p>
			<select id="question6" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>	
		<div class="form-group">
			<h2>Question 7</h2>
			<p>You feel more energetic after spending time with a group of people.</p>
			<select id="question7" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 8</h2>
			<p>Your mind is always buzzing with unexplored ideas and plans.</p>
			<select id="question8" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
		<div class="form-group">
			<h2>Question 9</h2>
			<p>Generally speaking, you rely more on your experience than your imagination.</p>
			<select id="question9" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			</div>
		<div class="form-group">
			<h2>Question 10</h2>
			<p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
			<select id="question10" class="form-control">
				<option value></option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
		</div>
	<br><hr>	
    <button type="submit" data-toggle="modal" class="btn btn-primary btn-lg submit">Submit</button><br>
	</form>
</div>

<div id="myModal" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog">
		<div classs="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h2 class="modal-title">Best Match</h2>
			</div>
			<div class="modal-body">
				<h2 id="matchName"></h2>

				<img id="matchImg" src="" alt="">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
//Data
//==============================================
	$(".submit").on("click", function(){

		//Validation of form completion
		function validate(){
			var valid = true;
			$(".form-control").each(function(){
				if($(this).val()=== ""){
					valid = false;
				}
			});

			return valid;
		}

		if (validate() === true) {
			//Grab form data
			var results = {
				name: $("#name").val().trim(),
				photo: $("#imageLink").val().trim(),
				scores: [
					$("#question1").val(), 
					$("#question2").val(), 
					$("#question3").val(),
					$("#question4").val(),
					$("#question5").val(),
					$("#question6").val(),
					$("#question7").val(),
					$("#question8").val(),
					$("#question9").val(),
					$("#question10").val()
				]
			};
			
			console.log("Results: " + results);	

			var currentURL = window.location.origin;

			$.post(currentURL + "/api-friends", results, function(bestMatch){
				$("#matchName").text(bestMatch.name);
				$("#matchImg").attr("src", bestMatch.photo);
				
				$("#myModal").modal("toggle");
				console.log("Modal showing");
			});
		} else {
			alert("Please fill out all fields to get your best match!");
		}
		return false;
	});
	
</script>
</body>
</html>